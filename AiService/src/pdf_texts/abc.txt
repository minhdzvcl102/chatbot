Báo
 
cáo
 
kết
 
quả
 
thực
 
tập
 
doanh
 
nghiệp
 
 
Lê
 
Xuân
 
Kỳ
 
-
 
202261 12
 
Công
 
ty
 
thực
 
tập:
 
Insight
 
Data(INDA)
 
I)
 
Chủ
 
đề
 
được
 
giao:
 
Xây
 
dựng
 
chatbot
 
cho
 
doanh
 
nghiệp
 
nhằm
 
cho
 
nhân
 
viên
 
tương
 
tác
 
với
 
SQL
 
database
 
của
 
doanh
 
nghiệp
 
và
 
các
 
tài
 
liệu
 
của
 
doanh
 
nghiệp
 
dễ
 
dàng
 
hơn.
 
 
 
II)
 
Kết
 
quả
 
làm
 
được:
 
 
Link
 
github:
 
https://github.com/lexuankyxd/data-analytic-chatbot
 
Link
 
demo:
 
https://drive.google.com/file/d/10CKdbMufvSoQJo7rk_FMnikTnlQJsDng/view?usp=sharing
 
1)
 
Thiết
 
kế
 
hệ
 
thống:
 
 
Hệ
 
thống
 
sẽ
 
bao
 
gồm
 
các
 
thành
 
phần
 
sau:
 
Website,
 
backend
 
cho
 
website
 
và
 
AI
 
agent.
 
Mặc
 
dù
 
AI
 
cũng
 
chỉ
 
tích
 
hợp
 
gọi
 
API
 
nên
 
chúng
 
ta
 
hoàn
 
toàn
 
có
 
thể
 
gộp
 
logic
 
của
 
AI
 
Agent
 
và
 
backend
 
của
 
website,
 
nhưng
 
tại
 
vì
 
sau
 
này
 
chúng
 
ta
 
muốn
 
bán
 
sản
 
phẩm
 
cho
 
các
 
doanh
 
nghiệp
 
như
 
ngân
 
hàng,
 
và
 
họ
 
sẽ
 
muốn
 
tự
 
host
 
sản
 
phẩm
 
vì
 
muốn
 
sử
 
bảo
 
mật
 
về
 
dữ
 
liệu
 
nên
 
sản
 
phẩm
 
được
 
xây
 
dựng
 
thành
 
3
 
phần
 
cho
 
việc
 
tái
 
thiết
 
kế
 
lại
 
AI
 
Agent
 
cho
 
việc
 
sử
 
dụng
 
mô
 
hình
 
LLM
 
tự
 
host
 
sẽ
 
dễ
 
dàng
 
hơn.
 
 
Trong
 
dự
 
án
 
này
 
em
 
sử
 
dụng
 
dịch
 
vụ
 
của
 
Alibaba
 
để
 
tạo
 
request
 
tới
 
các
 
model
 
sẵn
 
có,
 
trong
 
đó
 
em
 
sử
 
dụng
 
qwen
 
và
 
text-embedding-v3,
 
2
 
model
 
mà
 
alibaba
 
cung
 
cấp.
 
  
 
Trong
 
mô
 
hình
 
trên:
 
-
 
FE
 
Server:
 
Gửi
 
giao
 
diện
 
cho
 
người
 
dùng
 
-
 
BE
 
Server:
 
Nhận
 
các
 
API
 
request,
 
thực
 
hiện
 
tác
 
vụ
 
xác
 
thực
 
người
 
dùng
 
trước
 
mỗi
 
request
 
và
 
forward
 
các
 
tin
 
nhắn
 
chat
 
tới
 
MCP
 
Client
 
hoặc
 
tài
 
liệu
 
tới
 
thành
 
phần
 
xử
 
lý
 
document
 
tới
 
MCP
 
Server.
 
-
 
MCP
 
Client:
 
Là
 
logic
 
của
 
AI
 
Agent,
 
bao
 
gồm
 
phần
 
nhận
 
và
 
gửi
 
API
 
request
 
tới
 
Alibaba
 
 
-
 
MCP
 
Server:
 
Bao
 
gồm
 
2
 
MCP
 
server
 
con
 
là
 
RAG
 
MCP
 
server
 
và
 
SQL
 
MCP
 
server,
 
với
 
mỗi
 
server
 
chứa
 
các
 
tool
 
tương
 
ứng.
 
2)
 
Triển
 
khai
 
hệ
 
thống:
 
a)
 
Front-end:
 
Giao
 
diện
 
đăng
 
nhập:
 
 
 
 
Giao
 
diện
 
chính:
 
 
 
b)
 
Backend:
 
 
Các
 
API
 
và
 
backend
 
server
 
cung
 
cấp:
 
 
-
 
POST
 
/account/login:
 
 
Request
 
body:
 
email,
 
password
 
Response
 
content:
 
JWT
 
access
 
token
 
và
 
JWT
 
refresh
 
token.
 
Trong
 
đó
 
JWT
 
access
 
token
 
sẽ
 
được
 
lưu
 
trong
 
localstorage
 
của
 
trình
 
duyệt
 
và
 
có
 
tuổi
 
đời
 
ngắn
 
hơn,
 
còn
 
refresh
 
token
 
sẽ
 
được
 
lưu
 
trong
 
http-only
 
cookie
 
và
 
có
 
tuổi
 
đời
 
dài
 
hơn.
 
-
 
POST
 
/account/register:
 
Request
 
body:
 
email,
 
password,
 
username.
 
Response
 
content:
 
Thông
 
điệp
 
thành
 
công
 
hoặc
 
lý
 
do
 
thất
 
bại.
 
-
 
POST
 
/account/refresh:
 
Response
 
content:
 
Access
 
token
 
mới.
 
Yêu
 
cầu
 
được
 
gửi
 
với
 
lựa
 
chọn
 
include
 
cookie
 
và
 
BE
 
sẽ
 
xem
 
nếu
 
token
 
hợp
 
lệ
 
hay
 
không
 
để
 
tạo
 
access
 
token
 
mới.
 
-
 
POST
 
/account/validate:
 
Request
 
body:
 
access_token
 
Response
 
content:
 
thông
 
điệp
 
trả
 
lời
 
token
 
có
 
hợp
 
lệ
 
hay
 
không
 
API
 
end
 
point
 
này
 
dùng
 
để
 
khi
 
người
 
dùng
 
bắt
 
đầu
 
phiên
 
làm
 
việc,
 
client
 
tìm
 
trong
 
localstorage
 
xem
 
có
 
access_token
 
từ
 
phiên
 
trước
 
không
 
và
 
gửi
 
xem
 
nếu
 
token
 
còn
 
hợp
 
lệ
 
không,
 
nếu
 
có
 
thì
 
không
 
cần
 
đăng
 
nhập
 
lại,
 
còn
 
nếu
 
không
 
thì
 
gọi
 
tới
 
endpoint
 
refresh
 
để
 
lấy
 
access
 
token
 
mới,
 
nếu
 
không
 
có
 
refresh
 
token
 
thì
 
sẽ
 
bắt
 
người
 
dùng
 
đăng
 
nhập
 
lại
 
-
 
GET
 
/account/logout:
 
Response
 
content:
 
Xóa
 
refresh
 
token
 
trong
 
cookie
 
của
 
client.
 
 
-
 
POST
 
/chat/upload:
 
Request:
 
Gồm
 
các
 
file
 
muốn
 
thêm
 
vào
 
vector
 
store
 
và
 
access
 
token
 
 
Response:
 
ID
 
của
 
các
 
file
 
cho
 
việc
 
yêu
 
cầu
 
tiến
 
độ
 
xử
 
lý
 
file
 
-
 
POST
 
/chat/progress:
 
Request:
 
Gồm
 
ID
 
của
 
của
 
file
 
muốn
 
lấy
 
tiến
 
độ
 
và
 
access
 
token
 
Response:
 
Tiến
 
độ
 
xử
 
lý
 
file
 
-
 
GET
 
/chat/createThread
 
Response:
 
thông
 
điệp
 
thành
 
công
 
Tạo
 
1
 
cuộc
 
trò
 
chuyện
 
mới
 
-
 
GET
 
/chat/getThread?thread_id=?
 
Response:
 
thông
 
điệp
 
thành
 
công
 
hoặc
 
thất
 
bại.
 
Lấy
 
lại
 
cuộc
 
trò
 
chuyện
 
cũ
 
và
 
tất
 
cả
 
các
 
tool
 
đã
 
gọi.
 
Đồng
 
thời
 
đặt
 
thread
 
đang
 
sử
 
dụng
 
là
 
thread
 
được
 
gọi.
 
-
 
GET
 
/chat/getThreads
 
Response:
 
Tất
 
cả
 
các
 
thread
 
của
 
người
 
dùng.
 
-
 
chat/saveThread:
 
Yêu
 
cầu
 
server
 
lưu
 
thread
 
đang
 
sử
 
dụng.
 
 
Đồng
 
thời
 
backend
 
sử
 
dụng
 
websocket
 
để
 
trao
 
đổi
 
tin
 
nhắn
 
giữa
 
người
 
dùng
 
và
 
agent.
 
 c)
 
MCP
 
Client:
 
Tiếp
 
nhận
 
các
 
request
 
từ
 
BE
 
qua
 
unix
 
socket,
 
sau
 
đó
 
gọi
 
API
 
để
 
lấy
 
câu
 
trả
 
lời.
 
Em
 
sử
 
dụng
 
mô
 
hình
 
producer
 
-
 
consumer
 
để
 
song
 
song
 
hóa
 
các
 
yêu
 
cầu
 
gọi
 
API,
 
sử
 
dụng
 
queue
 
của
 
asyncio
 
để
 
thêm
 
và
 
lấy
 
các
 
yêu
 
cầu
 
cần
 
được
 
xử
 
lý.,
 
sử
 
dụng
 
event
 
loop
 
của
 
asyncio
 
nên
 
chỉ
 
cần
 
sử
 
dụng
 
1
 
thread.
 
d)
 
MCP
 
Server:
 
 
-
 
RAG
 
Server:
 
Cung
 
cấp
 
1
 
tool
 
để
 
tạo
 
yêu
 
cầu
 
query,
 
sử
 
dụng
 
mô
 
hình
 
giống
 
client
 
để
 
song
 
song
 
hóa
 
các
 
yêu
 
cầu
 
embed.
 
Đồng
 
thời
 
sử
 
dụng
 
1
 
thread
 
riêng
 
để
 
làm
 
việc
 
nhận
 
và
 
embed
 
document
 
từ
 
người
 
dùng,
 
giao
 
tiếp
 
với
 
BE
 
qua
 
1
 
unix
 
socket,
 
tiến
 
độ
 
embed
 
file
 
cũng
 
sẽ
 
được
 
gửi
 
qua
 
socket
 
này.
 
-
 
SQL
 
Server:
 
Có
 
các
 
tool
 
như
 
sau
 
+
 
List
 
databases:
 
Liệt
 
kê
 
tất
 
cả
 
database
 
có
 
thể
 
truy
 
cập
 
được.
 
+
 
List
 
tables:
 
Liệt
 
kê
 
các
 
bảng
 
của
 
1
 
database.
 
+
 
Get
 
schema:
 
Lấy
 
cấu
 
trúc
 
của
 
1
 
database
 
để
 
Agent
 
có
 
thể
 
tạo
 
query.
 
+
 
Query:
 
Thực
 
thi
 
và
 
trả
 
về
 
kết
 
quả
 
query
 
cho
 
agent.
 
 
 
III)
 
Đánh
 
giá
 
sản
 
phẩm:
 
 
-
 
Sản
 
phẩm
 
đạt
 
được
 
mục
 
đích
 
đề
 
ra
 
là
 
làm
 
proof
 
of
 
concept.
 
 
-
 
Còn
 
nhiều
 
điểm
 
cần
 
cải
 
thiện
 
như
 
cách
 
các
 
component
 
tương
 
tác
 
với
 
nhau.
 
 
-
 
Thiết
 
kế
 
kiến
 
trúc
 
của
 
hệ
 
thống
 
vẫn
 
còn
 
những
 
điểm
 
cần
 
cải
 
thiện,
 
hiện
 
tại
 
việc
 
thêm
 
chức
 
năng
 
cho
 
sản
 
phẩm
 
yêu
 
cầu
 
phải
 
sửa
 
lại
 
cách
 
các
 
component
 
tương
 
tác
 
với
 
nhau.
 